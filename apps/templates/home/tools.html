{% extends 'layouts/base.html' %}
{% load static %}

{% block title %} Tool List {% endblock title %}

{% block stylesheets %}
<style>
    .tool-card, .record-card {
        border: 1px solid #ddd;
        padding: 15px;
        margin: 10px 0;
        border-radius: 5px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        display: flex;
        flex-direction: row;
    }
    .tool-details, .record-details {
        flex: 2;
        margin-right: 15px;
    }
    .tool-image, .record-image {
        flex: 1;
        max-width: 150px; /* Limit the image size */
        height: auto;
    }
    .tool-list, .record-list {
        list-style-type: none;
        padding: 0;
    }
    .tool-list li, .record-list li {
        margin-bottom: 5px;
    }
</style>
{% endblock stylesheets %}

{% block content %}
<div class="container">
    <h1>Tool Management</h1>
    <p>Template Loaded: tools.html</p>  <!-- Unique identifier -->

    <form method="POST" class="form-inline mb-3">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit" class="btn btn-primary">Search</button>
    </form>

    <h2>Tools</h2>
    <p>Number of tools: {{ tools|length }}</p>  <!-- Debug statement -->

    {% for tool in tools %}
        <div class="tool-card">
            <div class="tool-details">
                <h3>{{ tool.name }}</h3>
                <p><strong>Location:</strong> {{ tool.location }}</p>
            </div>
            {% if tool.image %}
                <img src="{% static tool.image.name %}" alt="{{ tool.name }}" class="tool-image">
            {% else %}
                <p>No image available</p>
            {% endif %}
        </div>
    {% empty %}
        <p>No tools found.</p>
    {% endfor %}

    <h2>Maintenance Records</h2>
    <p>Number of records: {{ records|length }}</p>  <!-- Debug statement -->

    {% for record in records %}
        <div class="record-card">
            <div class="record-details">
                <h3>{{ record.tool.name }} - {{ record.date }}</h3>
                <p>{{ record.description }}</p>
                <p><strong>Performed by:</strong> {{ record.performed_by }}</p>
            </div>
        </div>
    {% empty %}
        <p>No maintenance records found.</p>
    {% endfor %}
</div>

<!-- Add debug information -->
<div class="container mt-5">
    <h2>Debug Information:</h2>
    <p>Tools:</p>
    <ul class="tool-list">
        {% for tool in tools %}
            <li>{{ tool.name }} (Location: {{ tool.location }})</li>
        {% endfor %}
    </ul>

    <p>Maintenance Records:</p>
    <ul class="record-list">
        {% for record in records %}
            <li>{{ record.tool.name }} - {{ record.date }} (Performed by: {{ record.performed_by }})</li>
        {% endfor %}
    </ul>
</div>
{% endblock content %}

{% include "includes/footer.html" %}