{% load static %}

<h2>Main - {{ project.title }}</h2>

<!-- Attachments Section -->
<h3>Attachments</h3>
<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {{ attachment_form.as_p }}
    <button type="submit" name="add_attachment" class="btn btn-primary">Upload Attachment</button>
</form>

<!-- Display Attachment Form Errors -->
{% if attachment_form.errors %}
    <div class="alert alert-danger">
        {{ attachment_form.errors }}
    </div>
{% endif %}

<ul>
    {% for attachment in attachments %}
    <li>
        <a href="{{ attachment.file.url }}">{{ attachment.file.name }}</a> (Uploaded by {{ attachment.uploaded_by.username }}, {{ attachment.uploaded_at|date:"Y-m-d H:i" }})
    </li>
    {% empty %}
    <li>No attachments yet.</li>
    {% endfor %}
</ul>

<!-- Notes Section -->
<h3>Notes</h3>
<form method="post">
    {% csrf_token %}
    {{ note_form.as_p }}
    <button type="submit" name="add_note" class="btn btn-primary">Add Note</button>
</form>

<!-- Display Note Form Errors -->
{% if note_form.errors %}
    <div class="alert alert-danger">
        {{ note_form.errors }}
    </div>
{% endif %}

<ul>
    {% for note in notes %}
    <li>
        {{ note.content }} (Added by {{ note.created_by.username }}, {{ note.created_at|date:"Y-m-d H:i" }})
    </li>
    {% empty %}
    <li>No notes yet.</li>
    {% endfor %}
</ul>
